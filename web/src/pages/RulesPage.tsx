// ไฟล์: web/src/pages/RulesPage.tsx
// ผู้เขียน (Written by): Gemini
// อัปเดตล่าสุด (Last modified): 2025-08-21 — แก้ไขให้ปุ่มยอมรับสามารถเชื่อมไปยังหน้าฟอร์ม (/form) ได้

// ------------------- ส่วนที่แก้ไข 1: นำเข้าเครื่องมือ -------------------
// เรานำเข้าเครื่องมือ 2 อย่าง
// 1. useNavigate (ยูส-นาวิเกต) = เครื่องมือสำหรับ "เปลี่ยนหน้า"
// 2. Link (ลิงก์) = เอาไว้สร้างปุ่มที่กดแล้วเปลี่ยนหน้าได้
import React, { useState } from "react";
import { useNavigate } from "react-router-dom"; // <-- เพิ่มบรรทัดนี้เข้ามา

// (ส่วนของ RuleItem ยังเหมือนเดิม ไม่ได้แก้ไข)
const RuleItem = ({ number, text }: { number: string; text: string }) => (
  <li style={{ display: "flex", marginBottom: "12px" }}>
    <span style={{ marginRight: "12px", fontWeight: "bold", color: "#334155" }}>{number}.</span>
    <span style={{ color: "#475569" }}>{text}</span>
  </li>
);

export default function RulesPage() {
  const [isAccepted, setIsAccepted] = useState(false);

  // ------------------- ส่วนที่แก้ไข 2: เตรียมเครื่องมือเปลี่ยนหน้า -------------------
  // เราเรียกใช้เครื่องมือ useNavigate แล้วเก็บใส่ "กล่อง" ที่ชื่อว่า navigate
  // ต่อไปนี้ถ้าเราอยากเปลี่ยนหน้า เราแค่เรียกใช้ navigate()
  const navigate = useNavigate(); // <-- เพิ่มบรรทัดนี้เข้ามา

  // ------------------- ส่วนที่แก้ไข 3: อัปเดตคำสั่งตอนกดปุ่ม -------------------
  // นี่คือ "คำสั่ง" ที่จะทำงานเมื่อผู้ใช้กดปุ่มยอมรับ
  const handleAccept = () => {
    // 1. บันทึกการยอมรับลงใน localStorage (โลคอล-สтораจ)
    // localStorage คือ "หน่วยความจำของเบราว์เซอร์" ที่จะจำค่านี้ไว้ตลอด
    // เราตั้งชื่อกุญแจว่า 'rulesAccepted' และเก็บค่า 'true' (แปลว่า ยอมรับแล้ว)
    localStorage.setItem("rulesAccepted", "true");

    // 2. สั่งให้เปลี่ยนหน้าไปยัง '/form'
    // เราใช้เครื่องมือ navigate ที่เตรียมไว้
    navigate("/form");
  };

  const handleCheckboxChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setIsAccepted(e.target.checked);
  };

  return (
    <div style={{ backgroundColor: "#f1f5f9", minHeight: "100vh", padding: "32px" }}>
      <div style={{ maxWidth: "800px", margin: "0 auto", backgroundColor: "white", borderRadius: "8px", boxShadow: "0 4px 6px rgba(0,0,0,0.1)" }}>
        
        <header style={{ backgroundColor: "#1e3a8a", color: "white", padding: "24px", borderTopLeftRadius: "8px", borderTopRightRadius: "8px" }}>
          <h1 style={{ fontSize: "24px", fontWeight: "bold" }}>ระเบียบการเข้าตกแต่งสถานที่เช่า และข้อกำหนดด้านความปลอดภัยและสิ่งแวดล้อมสำหรับผู้รับเหมา</h1>
          <p style={{ marginTop: "4px", color: "#dbeafe" }}>ศูนย์การค้าอิมพีเรียลเวิลด์สำโรง</p>
        </header>

        <main style={{ padding: "32px" }}>
          {/* ส่วนของเนื้อหาระเบียบทั้งหมดจะเหมือนเดิม ไม่มีการแก้ไข */}
          <ul style={{ listStyleType: "none", padding: 0 }}>
            <RuleItem number="1" text="ผู้เช่าหรือผู้รับเหมาจะต้องปิดกั้นผนังเบาหน้าพื้นที่เช่า (Vacancy) ก่อนเข้าดำเนินการตกแต่ง/รื้อถอน" />
            <RuleItem number="2" text="การเข้าดำเนินการตกแต่งสถานที่เช่า ผู้เช่า หรือตัวแทน จะต้องกรอกรายละเอียดในแบบฟอร์มเลขที่ FM-SAL-07 ขออนุญาตตกแต่งพื้นที่ให้ครบถ้วนพร้อมแนบสำเนาบัตรประชาชนหรือหนังสือที่ทางราชการออกให้ของผู้รับเหมา หัวหน้างาน และคนงานทุกคนหรือใบต่างด้าว เพื่อประกอบการพิจารณาอนุมัติกับบริษัทฯ ก่อนเข้าตกแต่งล่วงหน้าอย่างน้อย 3 วันทำการ" />
            <RuleItem number="3" text="หากในการตกแต่งพื้นที่เช่า มีสารเคมี และวัตถุอันตราย ผู้รับเหมาจะต้องมีเอกสารข้อมูลด้านความปลอดภัยของสารเคมี Material Safety Data Sheet (MSDS) หรือ Safety Data Sheet (SDS) ให้ครบถ้วน ตามรายการสารเคมีที่กำหนด และต้องขนถ่ายอย่างระมัดระวัง ไม่ให้หก หรือแพร่กระจาย อย่างเด็ดขาด" />
            <RuleItem number="4" text="กรณีที่บริษัทฯ ตรวจพบว่า ผู้เช่ามีการตกแต่งร้าน หรือปรับปรุง/ เปลี่ยนแปลง/ ต่อเติม/ แก้ไข งานระบบต่าง ๆ โดยไม่ได้ยื่นแบบขออนุญาตจากทางบริษัทฯ ก่อนดำเนินการ บริษัท ฯ จะคิดค่าปรับครั้งละ 5,000.- บาท หรือตามสิทธิที่มีอยู่ในสัญญาเช่าสถานที่" />
            <RuleItem number="5" text="กรณีทำงาน HOT WORK (งานที่มีประกายไฟ) จะต้องกรอกเอกสารขออนุญาตล่วงหน้าอย่างน้อย 3 วันทำการ พร้อมชำระค่า HOT WORK ครั้งละ 550 บาท/ครั้ง (รวม Vat.) และระหว่างการตกแต่งต้องมีถังดับเพลิง ชนิด CO2 ขนาด 10-15 ปอนด์ 1 ถัง/พื้นที่ 50 ตรม. (ระหว่างทำงาน HOT WORK ไม่อนุญาตให้ทำงานทาสี หรือพ่นสีที่เป็นวัตถุไวไฟโดยเด็ดขาด)" />
            <RuleItem number="6" text="หากการตกแต่งพื้นที่เช่า ก่อให้เกิดเพลิงไหม้ บริษัทฯ จะคิดค่าปรับครั้งละ 30,000.- บาท ทั้งนี้บริษัทฯ มีสิทธิ์ยกเลิกการอนุญาตตกแต่ง และริบเงินค่าประกันความเสียหายได้" />
            <RuleItem number="7" text="กรณีที่มีการตัดต่อท่อน้ำเย็น (CHS,CHR) ผู้เช่าหรือผู้รับเหมาจะต้องชำระค่า DRAIN น้ำเย็นออกจากระบบ โดยบริษัทฯจะคิดค่าใช้จ่ายครั้งละ 5,000.- บาท (รวมภาษีมูลค่าเพิ่ม)" />
            <RuleItem number="8" text="กรณีที่มีการตัดต่อท่อ GAS ผู้เช่าหรือผู้รับเหมาจะต้องชำระค่า DRAIN GAS ออกจากระบบ โดยบริษัทฯจะคิดค่าใช้จ่ายครั้งละ 5,000.- บาท (รวมภาษีมูลค่าเพิ่ม)" />
            <RuleItem number="9" text="กรณีที่มีการตัดต่อท่อ SPRINKLER ผู้เช่าหรือผู้รับเหมาจะต้องชำระค่า DRAIN น้ำออกจากระบบ โดยบริษัทฯจะคิดค่าใช้จ่ายครั้งละ 3,000.- บาท (รวมภาษีมูลค่าเพิ่ม)" />
            <RuleItem number="10" text="กรณีที่มีการตัดต่อท่อน้ำดี ผู้เช่าหรือผู้รับเหมาจะต้องชำระค่า DRAIN น้ำออกจากระบบ โดยบริษัทฯจะคิดค่าใช้จ่ายครั้งละ 3,000.- บาท (รวมภาษีมูลค่าเพิ่ม)" />
            <RuleItem number="11" text="บริษัทฯ จะติดใบอนุญาตตกแต่งพื้นที่และใบตรวจสอบงานตกแต่งที่ได้รับอนุมัติแล้ว ไว้ที่ด้านหน้าพื้นที่ตกแต่งที่สามารถมองเห็นได้ชัดเจน" />
            <RuleItem number="12" text="ทุกครั้งก่อนเข้าพื้นที่ทำงาน ต้องติดต่อเจ้าหน้าที่รักษาความปลอดภัย เพื่อทำการแลกบัตร ลงบันทึกประวัติ และต้องติดบัตรอนุญาตให้เห็นโดยเด่นชัดตลอดเวลา หากบัตรชำรุด หรือสูญหายคิดค่าปรับใบละ 200 บาท/ใบ (ต้องคืนบัตรวันต่อวัน)" />
            <RuleItem number="13" text="ในการตกแต่งพื้นที่เช่า ผู้ปฏิบัติงานจะต้องอยู่ในพื้นที่ตกแต่งของตนเองเท่านั้น หากฝ่าฝืนจะทำการปรับจนถึงระงับการก่อสร้าง" />
            <RuleItem number="14" text="ต้องแต่งกายสุภาพมิดชิดเหมาะสมกับการปฏิบัติงาน ใส่หมวกนิรภัย รองเท้าเซฟตี้ หรือรองเท้าผ้าใบ ห้าม ใส่รองเท้าแตะ, ผ้าถุง, กางเกงขาสั้นหรือเสื้อกล้ามโดยเด็ดขาด" />
            <RuleItem number="15" text="การทำงานที่มีความสูงตั้งแต่ 2 เมตรขึ้นไป จะต้องมีอุปกรณ์ป้องกัน, ตั้งนั่งร้านที่มั่นคงแข็งแรง และมี Safety Belt หากตรวจพบไม่มีอุปกรณ์ดังกล่าว จะระงับการตกแต่งโดยทันที" />
            <RuleItem number="16" text="บริษัทฯ อนุญาตให้ขอเข้าดำเนินการได้ ตั้งแต่เวลา 22.00 - 06.00 น. หากต้องการทำงานนอกเหนือจากเวลานี้ต้องได้รับอนุญาตจาก บริษัทฯ ก่อน" />
            <RuleItem number="17" text="ไม่อนุญาตให้สต็อกสารทินเนอร์หรือวัตถุไวไฟไว้ในพื้นที่เด็ดขาด จะต้องนำออกนอกพื้นที่ทุกวัน หากฝ่าฝืนปรับครั้งละ 10,000 บาท" />
            <RuleItem number="18" text="ห้าม ก่อกองไฟ สูบบุหรี่ ประกอบอาหาร หรือทำการใดๆ อันอาจก่อให้เกิดอัคคีภัยโดยเด็ดขาด หากฝ่าฝืนบริษัทฯ มีสิทธิยกเลิกการตกแต่งและคิดค่าปรับครั้งละ 10,000 บาท" />
            <RuleItem number="19" text="ห้าม ใช้ปลั๊กเปลือยในการเชื่อมต่อกระแสไฟฟ้า และเสียบปลั๊กพ่วงโดยเด็ดขาด หากฝ่าฝืนคิดค่าปรับครั้งละ 10,000 บาท" />
            <RuleItem number="20" text="ต้องจัดเตรียมแผงไฟฟ้าชั่วคราวที่มีอุปกรณ์ตัดไฟอัตโนมัติ(ที่ได้มาตรฐาน) และใช้สายไฟฟ้าชนิด VCT เท่านั้น" />
            <RuleItem number="21" text="ห้าม ดื่มสุราหรือเสพของมึนเมา เสพสารเสพติด เล่นการพนัน หรือกระทำการใดๆ ที่ผิดกฎหมาย หากฝ่าฝืนจะดำเนินการให้ออกจากพื้นที่ทันที" />
            <RuleItem number="22" text="หากมีเหตุทะเลาะวิวาท ทำร้ายร่างกาย ส่งเสียงดังรบกวนพื้นที่ข้างเคียง จะดำเนินการให้ออกจากพื้นที่ทันที" />
            <RuleItem number="23" text="กรณีมีการใช้น้ำ ต้องจัดเตรียมถังน้ำดีและน้ำเสีย และนำน้ำเสียมาทิ้งในจุดที่ศูนย์ฯกำหนดให้อย่างเคร่งครัด หากฝ่าฝืนมีค่าปรับครั้งละ 1,000 บาท" />
            <RuleItem number="24" text="ในการขนย้ายวัสดุอุปกรณ์ ต้องป้องกันไม่ให้เกิดความเสียหายกับทรัพย์สินของบริษัทฯ และขนย้ายตามเส้นทางที่กำหนด หากฝ่าฝืนปรับครั้งละ 1,000 บาท" />
            <RuleItem number="25" text="ต้องคัดแยกขยะเป็น 3 ประเภท (ทั่วไป, รีไซเคิล, อันตราย) และนำขยะไปทิ้งภายนอกเอง ห้ามทิ้งในพื้นที่ส่วนกลางเด็ดขาด ฝ่าฝืนปรับครั้งละ 1,000 บาท" />
            <RuleItem number="26" text="ต้องทำความสะอาดพื้นที่ทำงานให้เรียบร้อยทุกครั้งหลังปฏิบัติงานเสร็จในแต่ละวัน หากฝ่าฝืนคิดค่าปรับในการทำความสะอาดครั้งละ 1,000 บาท" />
            <RuleItem number="27" text="ก่อนออกจากพื้นที่ทำงานจะต้องแจ้งเจ้าหน้าที่รักษาความปลอดภัยของบริษัทฯ เพื่อเข้าตรวจสอบพื้นที่ก่อนทุกครั้ง" />
            <RuleItem number="28" text="บริษัทฯ ขอสงวนสิทธิ์ในการเข้าตรวจสอบการดำเนินงานในพื้นที่ตกแต่งตลอด 24 ชม. และอาจระงับการทำงานหากเห็นว่าอาจเกิดอันตราย" />
            <RuleItem number="29" text="ผู้รับเหมาต้องปฎิบัติตามระเบียบอื่นๆ ของบริษัทฯ ที่บังคับใช้ปัจจุบัน หรืออาจเกิดขึ้นภายหลัง โดยเคร่งครัด" />
          </ul>

          <p style={{marginTop: "24px", textAlign: "right", fontStyle: "italic", color: "#475569"}}>ฝ่ายป้องกันการสูญเสีย<br/>ศูนย์การค้าอิมพีเรียลเวิลด์สำโรง</p>

          <div style={{ marginTop: "32px", paddingTop: "24px", borderTop: "1px solid #e2e8f0" }}>
            <div style={{ display: "flex", alignItems: "center" }}>
              <input
                id="accept-checkbox"
                type="checkbox"
                checked={isAccepted}
                onChange={handleCheckboxChange}
                style={{ height: "20px", width: "20px" }}
              />
              <label htmlFor="accept-checkbox" style={{ marginLeft: "12px", color: "#334155", fontWeight: "500" }}>
                ข้าพเจ้าได้อ่านและเข้าใจระเบียบข้อบังคับทั้งหมดเรียบร้อยแล้ว และยินยอมปฏิบัติตามอย่างเคร่งครัด
              </label>
            </div>

            <div style={{ marginTop: "24px", textAlign: "center" }}>
              <button
                onClick={handleAccept}
                disabled={!isAccepted}
                style={{
                  padding: "12px 24px",
                  fontSize: "16px",
                  fontWeight: "bold",
                  color: "white",
                  borderRadius: "8px",
                  border: "none",
                  cursor: "pointer",
                  backgroundColor: isAccepted ? "#16a34a" : "#9ca3af",
                }}
              >
                ยอมรับและดำเนินการต่อ
              </button>
            </div>
          </div>
        </main>
      </div>
    </div>
  );
}