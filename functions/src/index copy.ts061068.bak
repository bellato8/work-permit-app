// ======================================================================
// File: functions/src/index.ts
// Version: 2025-10-06  (Asia/Bangkok)
// หน้าที่: รวม "ฟังก์ชันที่จะดีพลอยจริง" เท่านั้น ให้ชื่อไม่ซ้ำ และเรียกง่าย
// หมายเหตุสำคัญ:
//   - ห้าม export ยูทิลิตี้/ตัวช่วย (เช่น withCors, corsOrigins, serverAuthz, authz, lib/*, tools/*)
//   - ตั้งใจคงชื่อหลัก deleteLogs ไว้ที่ไฟล์ ./deleteLogs เท่านั้น
//   - ส่วนล้าง log แบบงานทำความสะอาด ใช้ชื่อ cleanupDeleteLogs (มาจาก ./cleanup)
//   - ถ้ากังวลเรื่องส่งอีเมลซ้ำ ให้ปิด onRequestCreatedNotifyApprovers ชั่วคราว (คอมเมนต์บรรทัดเดียว)
// อ้างอิงแนวปฏิบัติ: ชื่อที่ export จาก index.ts คือชื่อที่จะถูกดีพลอย/เรียกใช้จริง ๆ  และสามารถเลือกดีพลอยเฉพาะชื่อได้
// ======================================================================

// -------------------- Admin / Users --------------------
// บางตัวอยู่รวมใน adminUsers.ts
export { listAdmins, addAdmin } from "./adminUsers";
export { updateAdminRole } from "./updateAdminRole";
export { inviteAdmin } from "./inviteAdmin";
export { removeAdmin } from "./removeAdmin";

// -------------------- Requests / Status --------------------
export { listRequests } from "./listRequests";
export { getRequestAdmin } from "./getRequestAdmin";
export { updateStatus } from "./updateStatus";
export { getStatus } from "./getStatus";

// -------------------- Logs & Cleanup --------------------
export { listLogs } from "./listLogs";
// ชื่อหลักสำหรับลบล็อกหลายคอลเลกชัน + บันทึก audit
export { deleteLogs } from "./deleteLogs";
// งานทำความสะอาดใน cleanup.ts (รีเนมแล้วเพื่อไม่ให้ชน)
export { cleanupDeleteLogs, deleteRequestCascade } from "./cleanup";

// -------------------- Triggers / Notifications --------------------
// *หมายเหตุ: ถ้าเห็นว่าอีเมลถูกส่งซ้ำ ให้คอมเมนต์ตัวใดตัวหนึ่งชั่วคราว แล้วดีพลอยใหม่
export { onRequestCreated } from "./onRequestCreated";
//export { onRequestCreatedNotifyApprovers } from "./onRequestCreatedNotifyApprovers";
export { onRequestUpdatedNotifyRequester } from "./onRequestUpdatedNotifyRequester";

// -------------------- Auth / Security Logs --------------------
export { beforeSignIn } from "./auth/beforeSignIn";
export { logAuth } from "./logAuth";

// -------------------- Proxies (ชั้นกลางสำหรับเรียกของเก่า/ความเข้ากันได้) --------------------
export { proxyListRequests } from "./proxyListRequests";
export { proxyListAdmins } from "./proxyListAdmins";

// -------------------- Data Integrity / Utilities to run as functions --------------------
export { ensureCreatedAt } from "./ensureCreatedAt";

// ==================== อย่า export สิ่งต่อไปนี้ ====================
// - "./withCors", "./corsOrigins", "./serverAuthz", "./authz"
// - "./lib/*", "./tools/*", "./types/*"
// เหล่านี้เป็นตัวช่วยภายใน ไม่ใช่ฟังก์ชันที่ต้องดีพลอย
// ======================================================================
